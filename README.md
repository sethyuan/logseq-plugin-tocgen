ä¸­æ–‡ | [English](README.en.md)

# logseq-plugin-tocgen

ç”Ÿæˆä»»ä¸€é¡µé¢/å—çš„ç›®å½•ï¼Œé€šè¿‡å®ƒä½ å¯ä»¥å¿«é€Ÿè®¿é—®é¡µé¢/å—å†…å®¹ã€‚åŒæ—¶æä¾›äº†æ»šåŠ¨å›é¡µé¢é¡¶éƒ¨å’Œåº•éƒ¨çš„åŠŸèƒ½ã€‚æ³¨æ„ç›®å½•æ˜¯æ ¹æ®å—å±‚çº§æ¥ç”Ÿæˆçš„ã€‚

## åŠŸèƒ½å±•ç¤º

- è‡ªåŠ¨ä¸å†…å®¹åŒæ­¥
- Shift ç‚¹å‡»å¯åœ¨ä¾§è¾¹æ æ‰“å¼€
- å¤šç§å±•å¼€æ”¶èµ·æ–¹å¼
- æŒ‰ä½ Alt ç‚¹å‡»ç®­å¤´å¯å±•å¼€æ”¶èµ·å…¨éƒ¨å­å­™
- å®æ—¶è¿½è¸ªç¼–è¾‘ä½ç½®å¹¶åœ¨ç›®å½•ä¸Šé«˜äº®å±•ç¤º
- å®Œç¾æ”¯æŒåµŒå…¥å—ã€åµŒå…¥é¡µ
- å¯åœ¨ç›®å½•ä¸Šé€šè¿‡æ‹–æ‹½æ¥ç®¡ç†æ–‡æ¡£ç»“æ„
- è·Ÿéšä¸»ç¼–è¾‘é¡µé¢å˜åŒ–çš„åŠ¨æ€ç›®å½•
- ä¼šè·Ÿéšé¡µé¢å†…å®¹æ»šåŠ¨çš„å›ºå®šé«˜åº¦ç›®å½•
- é€šè¿‡é¡µé¢èœå•æˆ–å·¥å…·æ å¿«é€Ÿåœ¨ä¾§è¾¹æ æ‰“å¼€ç›®å½•
- å¿«é€Ÿå›åˆ°é¡µé¢é¡¶éƒ¨ã€åº•éƒ¨çš„æŒ‰é’®ï¼ˆå¯é€‰ï¼‰
- åˆ‡æ¢é¡µé¢æ—¶è‡ªåŠ¨å›åˆ°é¡¶éƒ¨æˆ–é¡µé¢ç¦»å¼€æ—¶çš„ä½ç½®ï¼ˆå¯é€‰è®¾ç½®ï¼‰

å…·ä½“è®¾ç½®å¯æ‰“å¼€æ’ä»¶è®¾ç½®æŸ¥çœ‹ã€‚

## ä½¿ç”¨å±•ç¤º

### åœºæ™¯é›¶ï¼Œå³é”®èœå•

![image](https://user-images.githubusercontent.com/3410293/230697775-bcca87fd-64a3-4c5c-9fc0-5f166fcedf59.png)

https://user-images.githubusercontent.com/3410293/216609543-9edcf0de-6a87-441a-a599-0b50511bb713.mp4

### åœºæ™¯ä¸€ï¼ŒåŠ¨æ€ç›®å½•

https://user-images.githubusercontent.com/3410293/196385678-ba12ad05-6729-4909-b527-83f5d062fd07.mp4

### åœºæ™¯äºŒï¼Œé¡µé¢å†…ç›®å½•

![demo](demo_inline_toc.gif)

### æ”¯æŒç”ŸæˆåµŒå…¥å—/é¡µé¢çš„ç›®å½•

![demo](demo_embed.gif)

ä¸Šé¢çš„æ¼”ç¤ºç”¨åˆ°äº† [Another Embed](https://github.com/sethyuan/logseq-plugin-another-embed) æ’ä»¶ï¼Œæ¨èå¤§å®¶å°è¯•ã€‚ç¼©çŸ­ namespace çš„æ•ˆæœçš„è„šæœ¬æ˜¯æˆ‘å†™çš„ `custom.js` çš„ä¸€éƒ¨åˆ†ï¼Œä»£ç å¯åœ¨[è¿™é‡Œ](https://gist.github.com/sethyuan/4ea9ed4305d0145ad565b2128ae6cef4)è·å–ã€‚

## ä½¿ç”¨ç¤ºä¾‹

å¦‚æœä½ æƒ³ç”Ÿæˆä¸€ä¸ªéšå½“å‰æµè§ˆé¡µé¢å˜åŠ¨è€Œå˜åŠ¨çš„ TOCï¼Œä½ å¯ä»¥ä¼ `*`ä½œä¸ºé¡µé¢åã€‚æ¨èã€‚

```
{{renderer :tocgen2, *}}

æŒ‡å®šç›®å½•é«˜åº¦ï¼Œè¿™æ ·ç›®å½•å†…å®¹å°±ä¼šéšé¡µé¢å†…å®¹æ»šåŠ¨äº†ã€‚é«˜åº¦å•ä½ç¬¦åˆCSSè§„èŒƒã€‚`auto` ä»£è¡¨ä¸å›ºå®šé«˜åº¦ï¼Œé«˜åº¦å–å†³äºå†…å®¹ã€‚
{{renderer :tocgen2, *, auto}}
{{renderer :tocgen2, *, 300px}}
```

```
ä¸ºå—æ‰€åœ¨çš„é¡µé¢ç”ŸæˆTOCã€‚
{{renderer :tocgen2}}
{{renderer :tocgen2, [[]]}}

ä¸ºæŸä¸€é¡µé¢åˆ›å»ºä¸€ä¸ªTOCï¼Œå¯ä»¥ç”¨ "[[" è¾…åŠ©æŸ¥æ‰¾æƒ³è¦çš„é¡µé¢ã€‚
{{renderer :tocgen2, pagename}}
{{renderer :tocgen2, [[pagename]]}}

ä½ ä¹Ÿå¯ä»¥ä¸ºæŸä¸€é¡µé¢å—åˆ›å»ºä¸€ä¸ªTOCï¼Œç›´æ¥å°†å—å¼•ç”¨ç²˜è´´è¿›æ¥å°±å¥½ã€‚
{{renderer :tocgen2, ((block-reference))}}

å¯ä»¥æŒ‡å®šè¦ç”Ÿæˆå‡ çº§ã€‚
{{renderer :tocgen2, [[]], auto, 2}}
{{renderer :tocgen2, [[pagename]], auto, 2}}
{{renderer :tocgen2, ((block-reference)), auto, 2}}

å¦‚æœä½ æƒ³åœ¨TOCä¸­åªåŒ…å«H1-Hnï¼ˆhï¼‰è¿™ç§headingï¼Œå³markdownçš„`#`è‡³`######`ï¼Œ
æˆ–è€…æŒ‡å®šä»»ä½•å†…å®¹éƒ½å¯ä»¥ä½œä¸ºheadingä½¿ç”¨ï¼ˆanyï¼‰ï¼Œ
é‚£ä¹ˆä½ å¯ä»¥å†é€šè¿‡ä¸€ä¸ªå‚æ•°æ¥è¯¦ç»†æŒ‡å®šã€‚
{{renderer :tocgen2, [[page name]], auto, 1, h}}
{{renderer :tocgen2, [[page name]], auto, 1, any}}
```

å¦‚æœæœ‰æŸä¸€å—ä½ ä¸æƒ³åˆ—å…¥ TOC ä¹‹ä¸­ï¼Œé‚£ä¹ˆä½ å¯ä»¥é€šè¿‡ä¸ºå…¶æŒ‡å®šä¸€ä¸ª `toc:: no` å—å±æ€§ã€‚

## è‡ªå®šä¹‰æ ·å¼

ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ä¸ª CSS ç±»æ¥è‡ªå®šä¹‰æ ·å¼ï¼Œ`kef-tocgen-page` å¯¹åº”é¡µé¢ï¼Œ`kef-tocgen-block` å¯¹åº”å—ï¼Œ`.kef-tocgen-active-block` å¯¹åº”ç¼–è¾‘ä¸­çš„å—ã€‚å‚ç…§ Logseq è‡ªå®šä¹‰æ ·å¼çš„æ–‡æ¡£æ“ä½œï¼Œå°†å†…å®¹æ”¾åœ¨`custom.css`ä¸­å³å¯ã€‚

```css
.kef-tocgen-page {
  cursor: pointer;
  line-height: 2;
}
.kef-tocgen-block {
  line-height: 1.7;
}
.kef-tocgen-active-block {
  font-size: 1.1em;
  font-weight: 600;
}
```

ä½ ä¹Ÿå¯ä»¥é€šè¿‡`kef-tocgen-noactivepage`æ¥è‡ªå®šä¹‰åŠ¨æ€ TOCï¼ˆè§ä½¿ç”¨ç¤ºä¾‹ï¼‰åœ¨æ²¡æœ‰æ£€æµ‹åˆ°æ´»åŠ¨é¡µé¢æ—¶çš„å†…å®¹ä¸æ ·å¼ã€‚

```css
.kef-tocgen-noactivepage::before {
  content: "ğŸˆšï¸";
}
```

## Buy me a coffee

å¦‚æœæ‚¨è®¤ä¸ºæˆ‘æ‰€å¼€å‘çš„è½¯ä»¶å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œå¹¶ä¸”æ„¿æ„ç»™äºˆè‚¯å®šå’Œæ”¯æŒï¼Œä¸å¦¨æ‰«æä¸‹æ–¹çš„äºŒç»´ç è¿›è¡Œæ‰“èµã€‚æ„Ÿè°¢æ‚¨çš„æ”¯æŒä¸å…³æ³¨ã€‚

![wx](https://user-images.githubusercontent.com/3410293/236807219-cf21180a-e7f8-44a9-abde-86e1e6df999b.jpg) ![ap](https://user-images.githubusercontent.com/3410293/236807256-f79768a7-16e0-4cbf-a9f3-93f230feee30.jpg)
